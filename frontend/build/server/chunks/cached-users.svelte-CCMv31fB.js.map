{"version":3,"file":"cached-users.svelte-CCMv31fB.js","sources":["../../../.svelte-kit/adapter-node/chunks/cached-users.svelte.js"],"sourcesContent":["import \"clsx\";\nclass CachedUsersStore {\n  _userMap = /* @__PURE__ */ new Map();\n  async getUsernameForIds(userIds, fetchIfNotFound) {\n    const result = {};\n    const missing = [];\n    for (const id of userIds) {\n      if (this._userMap.has(id)) {\n        result[id] = this._userMap.get(id);\n      } else {\n        missing.push(id);\n      }\n    }\n    if (missing.length > 0) {\n      const fetchResult = await fetchIfNotFound(missing);\n      if (fetchResult.isSuccess) {\n        for (const user of fetchResult.data.users) {\n          this._userMap.set(user.id, user.username);\n          result[user.id] = user.username;\n        }\n        const fetchedUsersIds = new Set(fetchResult.data.users.map((u) => u.id));\n        for (const id of missing) {\n          if (!fetchedUsersIds.has(id)) {\n            result[id] = null;\n          }\n        }\n      } else {\n        for (const id of missing) {\n          result[id] = null;\n        }\n      }\n    }\n    return result;\n  }\n}\nconst cachedUsersStore = new CachedUsersStore();\nexport {\n  cachedUsersStore as c\n};\n"],"names":[],"mappings":"AACA,MAAM,gBAAgB,CAAC;AACvB,EAAE,QAAQ,mBAAmB,IAAI,GAAG,EAAE;AACtC,EAAE,MAAM,iBAAiB,CAAC,OAAO,EAAE,eAAe,EAAE;AACpD,IAAI,MAAM,MAAM,GAAG,EAAE;AACrB,IAAI,MAAM,OAAO,GAAG,EAAE;AACtB,IAAI,KAAK,MAAM,EAAE,IAAI,OAAO,EAAE;AAC9B,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;AACjC,QAAQ,MAAM,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;AAC1C,OAAO,MAAM;AACb,QAAQ,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;AACxB;AACA;AACA,IAAI,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;AAC5B,MAAM,MAAM,WAAW,GAAG,MAAM,eAAe,CAAC,OAAO,CAAC;AACxD,MAAM,IAAI,WAAW,CAAC,SAAS,EAAE;AACjC,QAAQ,KAAK,MAAM,IAAI,IAAI,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE;AACnD,UAAU,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC;AACnD,UAAU,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ;AACzC;AACA,QAAQ,MAAM,eAAe,GAAG,IAAI,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;AAChF,QAAQ,KAAK,MAAM,EAAE,IAAI,OAAO,EAAE;AAClC,UAAU,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;AACxC,YAAY,MAAM,CAAC,EAAE,CAAC,GAAG,IAAI;AAC7B;AACA;AACA,OAAO,MAAM;AACb,QAAQ,KAAK,MAAM,EAAE,IAAI,OAAO,EAAE;AAClC,UAAU,MAAM,CAAC,EAAE,CAAC,GAAG,IAAI;AAC3B;AACA;AACA;AACA,IAAI,OAAO,MAAM;AACjB;AACA;AACK,MAAC,gBAAgB,GAAG,IAAI,gBAAgB;;;;"}